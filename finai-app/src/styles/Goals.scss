

/* --- Grid Lista de Metas (.goal-list-grid) --- */
// Refactorizado y con Responsividad
.goal-list-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); // Base
    gap: $spacing-xl; // Usar variable

    // Media Queries anidadas para ajustar el grid
    @include md-up {
        // En tabletas o m치s grandes
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); // Ajustar min-width
        gap: $spacing-xl;
    }

    @include mobile-only {
        // En m칩viles peque침os
        grid-template-columns: 1fr; // Una columna
        gap: $spacing-md; // Menos espacio
    }
}

.custom-toast-container.archive-suggestion-toast {
  // Hereda estilos de .custom-toast-container si existe, o define aqu칤:
  background-color: $color-panel-bg; // O un color espec칤fico
  color: $color-text-dark;
  border-radius: $border-radius-md;
  box-shadow: $box-shadow-lg;
  padding: $spacing-md $spacing-lg;
  max-width: 400px; // Ajusta el ancho
  display: flex;
  align-items: flex-start; // Alinear icono y contenido
  gap: $spacing-md;
  position: relative; // Para el bot칩n de cierre absoluto

  .toast-icon {
    font-size: 1.8em; // Tama침o del icono de celebraci칩n 游꿀
    color: $color-accent-yellow; // O el color que prefieras
    line-height: 1; // Alinear bien el emoji
  }

  .toast-content {
    flex-grow: 1;
    p {
      margin: 0;
      line-height: 1.4;
    }
    .toast-title {
      font-weight: 600;
      font-size: 1.05em;
      margin-bottom: $spacing-xs / 2;
    }
    .toast-body {
      font-size: 0.9em;
      color: $color-text-muted;
      margin-bottom: $spacing-md;
    }
  }

  .toast-actions.horizontal { // Para que los botones est칠n en fila
    display: flex;
    gap: $spacing-sm;
    justify-content: flex-end; // O center
    margin-top: $spacing-sm; // Espacio si el texto es largo
    width: 100%;
    //.btn {
      // Heredan de .btn, .btn-sm
      // Puedes a침adir m치s especificidad si es necesario
      // &.green-btn { background-color: $color-accent-green; }
    //}
  }
  
  .toast-close-btn.minimal { // Bot칩n de cierre del toast
    position: absolute;
    top: $spacing-xs;
    right: $spacing-xs;
    background: none;
    border: none;
    color: $color-text-muted;
    font-size: 1em;
    padding: $spacing-xs / 2;
    cursor: pointer;
    &:hover {
      color: $color-text-dark;
    }
  }
}

/* --- Tarjeta de Meta (.goal-card) --- */
// Refactorizado y Anidado
.goal-card {
    background-color: $color-panel-bg; // Usar variable
    border-radius: $border-radius-lg; // Usar variable
    padding: $spacing-xl; // Usar variable
    box-shadow: 0 6px 15px rgba($color-shadow, 0.07); // Usar variable y rgba
    display: flex;
    flex-direction: column;
    @include transition-smooth((transform, box-shadow)); // Usar mixin
    position: relative;
    /* Para acciones o badges */

    &:hover {
        // Estado hover
        transform: translateY(-5px);
        box-shadow: 0 0px 25px rgba($color-accent-orange, 0.4); // Usar variable y rgba
        // Puedes a침adir un borde de color al pasar el rat칩n
        // border-color: $color-accent-orange;
    }

    &.is-archived {
    opacity: 0.65;
    background-color: lighten($color-border, 5%); // Un fondo gris치ceo muy claro
    border-left-color: $color-text-muted; // Borde izquierdo gris

    .card-header .goal-name,
    .card-body .label,
    .card-body .amount {
      color: darken($color-text-muted, 10%); // Opcional: hacer el texto m치s tenue
    }

    .progress-bar-container .progress-bar {
      background-color: $color-text-muted !important; // Forzar color gris en la barra
    }
    
    &:hover {
      opacity: 0.8; // Un poco menos de opacidad al hacer hover
      // transform: none; // Quiz치s no quieres el efecto de elevaci칩n
      // box-shadow: $box-shadow-sm; // Sombra m치s sutil
    }
    // Ocultar botones que no aplican a archivadas
    .btn-add-savings, .btn-edit, .btn-archive-goal {
        display: none !important;
    }
  }


    .card-header {
        // Encabezado de la tarjeta
        display: flex;
        align-items: flex-start; // Alinear icono arriba con texto
        gap: $spacing-md; // Usar variable
        margin-bottom: $spacing-md; // Usar variable
        // Si tiene separador: border-bottom: 1px solid $color-border; padding-bottom: $spacing-sm;


        .goal-archived-badge {
            font-size: 1.3em; // Similar al de completado o un poco diferente
            color: $color-text-muted; // Color gris
            margin-left: $spacing-sm;
            // animation: none; // Si no quieres animaci칩n para este
        }
    }

    .goal-icon {
        // Icono de la meta
        font-size: 1.5em;
        color: $color-accent-purple; // Color base (puede venir de JS)
        line-height: 1; // Ajustar l칤nea para icono
        flex-shrink: 0;
        width: 20px; // Ancho fijo si necesitas alinear
        height: 20px;

        // Color del icono si var칤a por tipo de meta (gestionado por JS o style inline)
    }

    .header-text {
        // Contenedor de nombre y fecha objetivo
        flex-grow: 1;
        @include text-ellipsis; // Aplicar a este contenedor si quieres truncar nombre largo
    }

    .goal-name {
        // Nombre de la meta
        margin: 0 0 $spacing-xs 0; // Usar variables
        font-size: 1.3em;
        font-weight: 800;
        color: $color-text-dark; // Usar variable
        @include text-ellipsis; // Usar mixin si el nombre puede ser muy largo
    }

    .goal-target-date {
        // Fecha objetivo
        font-size: 0.85em; // Usar variable
        color: $color-text-muted; // Usar variable
        margin: 0;
    }


    .card-body {
        // Cuerpo de la tarjeta
        flex-grow: 1;
        margin-bottom: $spacing-md; // Usar variable
    
        .saving-suggestion-text {
            margin-top: $spacing-sm; // Espacio respecto al "Restante" o la barra
            text-align: center; // O left, seg칰n prefieras
            
            small {
                font-size: 0.8em;
                color: $color-text-muted; // Un color discreto
                font-style: italic;
                display: inline-flex; // Para alinear icono y texto
                align-items: center;

                //i.fa-lightbulb {
                // El color se aplica inline, pero puedes a침adir m치s estilos aqu칤 si es necesario
                // font-size: 1.1em; // Si quieres el icono un poco m치s grande que el texto
                //))}
            }
    }


    }

    .goal-amounts {
        // Contenedor de montos (Ahorrado / Objetivo)
        display: flex;
        justify-content: space-between;
        margin-bottom: $spacing-md; // Usar variable
        font-size: 0.9em; // Usar variable
        flex-wrap: wrap;
        /* Para m칩vil */
        gap: $spacing-sm; // Usar variable
        color: $color-text-dark; // Color base para el texto de montos (etiquetas)

        .amount-pair {
            // Cada par Etiqueta/Monto
            display: flex;
            flex-direction: column; // Apilar etiqueta y monto
            // align-items: flex-end; // Alinear a la derecha si quieres los montos apilados a la derecha
        }

        .amount-pair .label {
            // Etiqueta (Ahorrado:, Objetivo:)
            color: $color-text-muted; // Usar variable
            font-size: 0.9em; // Usar variable
            margin-bottom: $spacing-xs/2; // Usar variable
        }

        .amount {
            // Valor del monto
            font-weight: 700;
            font-size: 1.1em; // Usar variable
        }

        .amount-pair .target {
            color: $color-text-dark;
        }

        // Objetivo (color normal)
        .amount-pair .current {
            color: $color-accent-green;
        }

        // Ahorrado (verde)

        // Responsive para los montos (flex-wrap ya ayuda, ajustar si es necesario)
        @include mobile-only {
            // Ajustes si es necesario
        }
    }

    /* Barra de Progreso */
    .progress-bar-container {
        // Contenedor de la barra (usar estilos de _components.scss si aplica)
        //height: 100%;
        width: 100%;
        height: $spacing-sm * 1.5; // Grosor barra (usar variable)
        background-color: $color-border; // Fondo gris claro (usar variable)
        border-radius: $border-radius-sm; // Bordes redondeados (usar variable)
        overflow: hidden;
        margin-top: $spacing-sm; // Usar variable
        position: relative; // Para el porcentaje
    }

    .progress-bar {
        // Barra de progreso interior (usar estilos de _components.scss si aplica)
        height: 100%;
        width: 0%;
        /* Ajustado por JS */
        background-color: $color-accent-green; // Color verde por defecto (ajustado por JS o clase)
        border-radius: $border-radius-sm;
        transition: width $transition-speed-slow $transition-ease, background-color $transition-speed-slow $transition-ease;
        display: block;
        // Colores barra seg칰n porcentaje (Gestionado por JS a침adiendo clases o estilos inline)
        // &.medium { background-color: $color-accent-yellow; }
        // &.high { background-color: $color-accent-red; }
        // &.complete { background-color: $color-accent-purple; }
    }

    .progress-percentage {
        // Porcentaje superpuesto
        position: absolute;
        right: $spacing-sm; // Usar variable
        top: 50%;
        transform: translateY(-50%);
        font-size: 0.75em; // Usar variable
        font-weight: 600; // Usar variable
        color: rgba($color-text-dark, 0.5); // Color por defecto (oscuro semitransparente)
        transition: color $transition-speed-fast $transition-ease;
    }

    // Color blanco si la barra es oscura y est치 avanzada (gestionado por JS a침adiendo clase)
    /*
    .progress-bar.medium + &,
    .progress-bar.high + &,
    .progress-bar.complete + & { color: rgba($color-text-light, 0.9); }
    */


    .amount-remaining {
        // Texto de restante/completado
        text-align: center;
        margin-top: $spacing-sm; // Usar variable
        font-weight: 700;
        font-size: 0.9em; // Usar variable
        color: $color-text-muted; // Color base (gris)

        &.positive {
            color: $color-text-muted;
        }

        // Gris si falta
        &.negative {
            color: $color-accent-red;
        }

        // No deber칤a ser negativo, pero por si acaso
        &.complete {
            color: $color-accent-green;
            font-weight: bold;
        }

        // Verde y negrita si completado
    }


    .card-actions {
        // Contenedor de acciones
        display: flex;
        justify-content: flex-end;
        gap: $spacing-sm; // Usar variable
        padding-top: $spacing-md; // Usar variable
        border-top: 1px solid $color-border; // Usar variable

        .btn-view-history {
            color: $color-accent-blue; 
            &:hover {
            color: darken($color-accent-blue, 10%);
            }
        }

        .btn-icon {
            // Botones icono dentro de acciones (usar치n estilos de _buttons.scss)
            font-size: 1.1em; // Usar variable
            color: $color-text-muted; // Usar variable
            padding: $spacing-xs; // Usar variable
            @include transition-smooth((color, transform)); // Usar mixin

            &:hover {
                color: $color-accent-purple;
            }

            // Usar variable
            &.btn-delete:hover {
                color: $color-accent-red;
            }

            // Usar variable
            &.btn-edit:hover {
                color: $color-accent-purple;
            }

            // Usar variable (si editar es morado)
            &.btn-add-savings {
                color: $color-accent-green;
            }

            // Color espec칤fico para a침adir ahorro
            &.btn-add-savings:hover {
                color: darken($color-accent-green, 10%);
            }

            // Usar variable y funci칩n
        }
    }

    // Responsive para la tarjeta de meta individual
    @include mobile-only {
        // En pantallas peque침as
        padding: $spacing-md; // Menos padding

        .card-header {
            gap: $spacing-sm;
            margin-bottom: $spacing-sm;
        }

        .goal-icon {
            font-size: 2em;
            width: 30px;
        }

        // Ajustar tama침o icono
        .goal-name {
            font-size: 1.1em;
        }

        // Nombre m치s peque침o
        .goal-target-date {
            font-size: 0.8em;
        }

        // Fecha m치s peque침a
        .card-body {
            margin-bottom: $spacing-md;
        }

        .goal-amounts {
            font-size: 0.85em;
            gap: $spacing-xs;
        }

        // Ajustar montos
        .amount-pair .amount {
            font-size: 1em;
        }

        // Ajustar valor monto
        .progress-bar-container {
            height: $spacing-sm;
        }

        // Ajustar grosor barra
        .progress-bar {
            border-radius: $border-radius-sm;
        }

        // Ajustar border-radius de barra
        .progress-percentage {
            font-size: 0.7em;
            right: $spacing-xs/2;
        }

        // Ajustar porcentaje
        .amount-remaining {
            margin-top: $spacing-xs;
            font-size: 0.8em;
        }

        // Ajustar texto restante
        .card-actions {
            padding-top: $spacing-sm;
            gap: $spacing-xs;
        }

        .card-actions .btn-icon {
            font-size: 1em;
            padding: $spacing-xs/2;
        }

        // Iconos m치s peque침os
    }
}


.view-controls-bar.goals-controls { // Clase espec칤fica para los controles de metas
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between; // Para que el toggle de archivadas se vaya a la derecha
  align-items: center;
  padding: $spacing-sm $spacing-md;
  margin-bottom: $spacing-lg;
  // background-color: lighten($color-panel-bg, 2%); // Opcional
  // border-radius: $border-radius-md;
  // box-shadow: $box-shadow-sm;
  gap: $spacing-lg; // Espacio entre los grupos de control

  .filter-control,
  .sort-control {
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    
    label {
      font-weight: 500;
      font-size: 0.9em;
      color: $color-text-muted;
      white-space: nowrap;
    }

    select {
      padding: $spacing-xs $spacing-sm;
      border: 1px solid $color-border;
      border-radius: $border-radius-sm;
      background-color: $color-panel-bg;
      font-size: 0.9em;
      min-width: 180px; // Ajusta
      cursor: pointer;

      &:focus {
        border-color: $color-accent-purple;
        box-shadow: 0 0 0 2px rgba($color-accent-purple, 0.2);
        outline: none;
      }
      &:disabled {
        background-color: lighten($color-border, 5%);
        cursor: not-allowed;
      }
    }
  }
  
  // El bot칩n de archivar ya tiene .btn .btn-secondary .btn-sm

  @include mobile-only {
    flex-direction: column;
    align-items: stretch;
    .filter-control,
    .sort-control {
      justify-content: space-between;
      margin-bottom: $spacing-sm;
      select {
        flex-grow: 1;
        min-width: 0;
      }
    }
    // El bot칩n de archivar ya deber칤a ser full-width por .btn en m칩vil si lo tienes as칤
  }
}

// Estilos para el Modal A침adir Ahorro (#addSavingsForm)
// Si estos estilos son gen칠ricos de modales, mu칠velos a _modals.scss.
// Si son espec칤ficos de este modal, refactor칤zalos y an칤dalos.
#addSavingsForm {
    // Anidado si es espec칤fico
    // ... estilos del formulario del modal de a침adir ahorro ...
    // Los inputs y botones usar치n estilos de _modals.scss y _buttons.scss

    p {
        // P치rrafos dentro del formulario (ej. "Deuda con:")
        margin: $spacing-sm 0 $spacing-lg 0; // Usar variables
        text-align: center;
        color: $color-text-dark; // Usar variable
        font-size: 0.95em; // Usar variable
    }

    strong {
        // Texto fuerte dentro de p치rrafos (ej. nombre de la meta)
        color: $color-accent-purple; // Usar variable
    }

    // Los .input-group y .modal-actions dentro de este formulario
    // DEBER칈AN usar los estilos definidos en _modals.scss.
    // Si tienen alguna particularidad S칍LO en este modal, anidarla aqu칤:
    // .input-group { ... overrides ... }
    // .modal-actions { ... overrides ... }
}
    

